{
    "name": "Lix",
    "scopeName": "source.lix",
    "patterns": [
        {
            "include": "#newline"
        },
        {
            "include": "#blank"
        },
        {
            "include": "#test"
        },
        {
            "include": "#escape-char"
        }
    ],
    "repository": {
        "name": {
            "match": "[A-Za-z0-9-]+",
            "name": "variable.other.name.lix"
        },
        "newline": {
            "match": "[\\r\\n]",
            "name": "variable.other.newline.lix"
        },
        "blank": {
            "match": "[\\t \\v\\f]",
            "name": "variable.other.blank.lix"
        },
        "escape-char": {
            "match": "(\\\\)[\\]\\@\\/]",
            "captures": {
                "1": {
                    "name": "punctuation.definition.keyword.lix"
                }
            },
            "name": "constant.character.escape.lix"
        },
        "test": {
            "patterns": [
                {
                    "include": "#name"
                },
                {
                    "include": "#newline"
                }
            ],
            "name": "variable.other.test.lix"
        },
        "comment": {
            "patterns": [
                {
                    "include": "#line-comment"
                },
                {
                    "include": "#multiline-comment"
                }
            ]
        },
        "line-comment": {
            "match": "\\/\\/.*$",
            "name": "comment.line.double-slash.lix"
        },
        "multiline-comment": {
            "begin": "\\/\\*",
            "end": "\\*\\/",
            "name": "comment.block.lix",
            "patterns": [
                {
                    "include": "#multiline-comment"
                }
            ]
        },
        "setting": {
            "begin": "^(\\s*)(#)",
            "beginCaptures": {
                "2": {
                    "name": "punctuation.definition.setting.lix"
                }
            },
            "end": "$",
            "name": "meta.setting.lix",
            "patterns": [
                {
                    "include": "#name-token"
                },
                {
                    "match": ":",
                    "name": "punctuation.separator.key-value.lix"
                }
            ]
        },
        "block": {
            "begin": "\\[\\s*([A-Za-z0-9-]+)",
            "beginCaptures": {
                "0": {
                    "name": "punctuation.section.block.begin.lix"
                },
                "1": {
                    "name": "entity.name.section.lix"
                }
            },
            "end": "(?=\\n\\s*\\n)|(?<!\\\\)\\]",
            "endCaptures": {
                "0": {
                    "name": "punctuation.section.block.end.lix"
                }
            },
            "name": "meta.block.lix",
            "patterns": [
                {
                    "include": "#arguments"
                },
                {
                    "include": "#block-body"
                }
            ]
        },
        "code-block": {
            "begin": "\\[\\s*(code)\\b",
            "beginCaptures": {
                "0": {
                    "name": "punctuation.section.block.begin.lix"
                },
                "1": {
                    "name": "entity.name.function.code.lix"
                }
            },
            "end": "(?=\\n\\s*\\n)|(?<!\\\\)\\]",
            "name": "meta.block.code.lix",
            "patterns": [
                {
                    "include": "#arguments"
                },
                {
                    "begin": "(`+)(?=\\s*$)",
                    "beginCaptures": {
                        "1": {
                            "name": "punctuation.definition.raw.begin.lix"
                        }
                    },
                    "end": "^\\1\\s*$",
                    "endCaptures": {
                        "0": {
                            "name": "punctuation.definition.raw.end.lix"
                        }
                    },
                    "contentName": "string.quoted.raw.code.lix",
                    "patterns": [
                        {
                            "match": ".",
                            "name": "constant.character.raw.code.lix"
                        }
                    ]
                },
                {
                    "match": ".",
                    "name": "string.quoted.raw.code.lix"
                }
            ]
        },
        "arguments": {
            "patterns": [
                {
                    "begin": "\\(",
                    "beginCaptures": {
                        "0": {
                            "name": "punctuation.section.parens.begin.lix"
                        }
                    },
                    "end": "\\)",
                    "endCaptures": {
                        "0": {
                            "name": "punctuation.section.parens.end.lix"
                        }
                    },
                    "patterns": [
                        {
                            "include": "#name-token"
                        },
                        {
                            "match": "@[A-Za-z0-9-]+",
                            "name": "constant.other.reference.lix"
                        },
                        {
                            "match": ":",
                            "name": "punctuation.separator.key-value.lix"
                        },
                        {
                            "match": ",",
                            "name": "punctuation.separator.sequence.lix"
                        },
                        {
                            "include": "#number"
                        },
                        {
                            "include": "#string"
                        },
                        {
                            "include": "#comment"
                        }
                    ]
                },
                {
                    "match": ":",
                    "name": "punctuation.separator.arguments.lix"
                }
            ]
        },
        "block-body": {
            "patterns": [
                {
                    "include": "#comment"
                },
                {
                    "include": "#blank-line"
                },
                {
                    "include": "#reference"
                },
                {
                    "include": "#inline-formula"
                },
                {
                    "include": "#inline-code"
                },
                {
                    "include": "#string"
                },
                {
                    "include": "#number"
                },
                {
                    "include": "#escape"
                },
                {
                    "include": "#block"
                },
                {
                    "match": "\\\\\\\\",
                    "name": "constant.character.newline.lix"
                },
                {
                    "match": "\\]",
                    "name": "invalid.illegal.unexpected-end.lix"
                },
                {
                    "match": ".",
                    "name": "text.plain.lix"
                }
            ]
        },
        "free-text": {
            "patterns": [
                {
                    "include": "#comment"
                },
                {
                    "include": "#blank-line"
                },
                {
                    "include": "#setting"
                },
                {
                    "include": "#block"
                },
                {
                    "include": "#reference"
                },
                {
                    "include": "#inline-formula"
                },
                {
                    "include": "#inline-code"
                },
                {
                    "include": "#string"
                },
                {
                    "include": "#number"
                },
                {
                    "include": "#escape"
                },
                {
                    "match": "\\\\\\\\",
                    "name": "constant.character.newline.lix"
                },
                {
                    "match": "\\]",
                    "name": "invalid.illegal.unexpected-end.lix"
                },
                {
                    "match": ".",
                    "name": "text.plain.lix"
                }
            ]
        },
        "reference": {
            "match": "@[A-Za-z0-9-]+",
            "name": "constant.other.reference.lix"
        },
        "inline-formula": {
            "begin": "(?<!\\\\)/",
            "beginCaptures": {
                "0": {
                    "name": "punctuation.definition.math.begin.lix"
                }
            },
            "end": "/",
            "endCaptures": {
                "0": {
                    "name": "punctuation.definition.math.end.lix"
                }
            },
            "name": "meta.inline.math.lix",
            "patterns": [
                {
                    "include": "#escape"
                },
                {
                    "match": ".",
                    "name": "string.other.math.lix"
                }
            ]
        },
        "inline-code": {
            "begin": "(`+)",
            "beginCaptures": {
                "1": {
                    "name": "punctuation.definition.code.begin.lix"
                }
            },
            "end": "(\\1)",
            "endCaptures": {
                "1": {
                    "name": "punctuation.definition.code.end.lix"
                }
            },
            "name": "string.quoted.other.inline.code.lix"
        },
        "escape": {
            "match": "\\\\[\\[\\]\\(\\)#@/\\\\]",
            "name": "constant.character.escape.lix"
        },
        "string": {
            "match": "(`[^\\r\\n`]*`|'[^\\r\\n']*'|\"[^\\r\\n\"]*\")",
            "name": "string.quoted.lix"
        },
        "blank-line": {
            "patterns": [
                {
                    "match": "^[\\t \\v\\f]+$",
                    "name": "meta.whitespace.singleline.lix"
                },
                {
                    "match": "^(?:[\\t \\v\\f]|\\/\\/.*|\\/\\*[^*]*\\*+(?:[^/*][^*]*\\*+)*\\/)+$",
                    "name": "meta.whitespace.multiline.lix"
                }
            ]
        },
        "number": {
            "match": "[+-]?\\d+(?:\\.\\d+)?(?:px|em|cm|%)?",
            "name": "constant.numeric.lix"
        }
    }
}